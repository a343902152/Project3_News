<!doctype html>
<html class="no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="description" content="">
	<meta name="keywords" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<title>Java Exp</title>
	<meta name="renderer" content="webkit">
	<meta http-equiv="Cache-Control" content="no-siteapp"/>
	<link rel="stylesheet" href="./static/css/bootstrap.min.css">
	<link rel="stylesheet" href="./static/css/amazeui.min.css">
	<link rel="stylesheet" href="./static/css/main.css">

	<script type="text/javascript" src="JS/jquery-1.9.1.js"></script>
	<script type="text/javascript" src="JS/jquery.mobile-1.4.4.js"></script>
	<script type="text/javascript">
		localStorage.newsType ="0";
		localStorage.newsId="";

		// fixme 用create不会多次load，但是点击标题进入新闻详情会有问题
		$(document).on("pagecreate",function(){
//		$(document).on("pagecreate","#page1",function(){
			alert("oncreate");
			$(".active").click(function(){
				if(Math.random()>0.5)
					localStorage.newsType="0";
				else
					localStorage.newsType="1";
				loadNews();
			});
			loadNews();
		});

		// FIXME 加载完毕时，点击active时会loadnews两次，新闻详情没有问题
		$(document).ready(function() {
			alert("ready");
			$(".active").click(function(){
				// FIXME 每次click都会读取两次数据？？？
				// 随机分配新闻type
				if(Math.random()>0.5)
					localStorage.newsType="0";
				else
					localStorage.newsType="1";
				loadNews();
			});
			loadNews();
		});

		//	$(document).on("pagebeforeshow","#page1",function(){
		//		alert("pagebeforeshow");
		//	});

		/**
		 * 清空content，写入新数据
		 */
		function loadNews(){
			$.ajax({
				url:"controller",
				type:"GET",
				data:{
					"action":"getNewsList",
					"newsType":localStorage.newsType
				},
				success:function(data){
					// 更新到界面上
					$("#content").html(data);
				},
				error: function(){
//				alert("请求失败，请刷新重试");
				}
			});
		}


	</script>
</head>
<body>

<div class="fake-header"></div>


<header class="navbar-fixed-top">



	<div class=" am-container navbar "  >
		<a href="" class="logo"><img src=""></a>
		<a href="" class="active">标题测试标</a>
		<a href="" class="active">标题测试</a>
		<a href="" class="active">标题测试标题</a>



		
    <div class="input-group search">
		<input type="text" class="form-control" placeholder="Search for...">
		<span class="input-group-btn">
			<button class="btn btn-default" type="button">Go!</button>
		</span>
    </div>
		
		<div class="clear"></div>
	</div>
	<div class="clear"></div>

</header>

<!--新添加的page-->
<div data-role="page" id="page1">
<div class="wrapper am-g am-g-fixed am-container" >
	<div class="main">
		<ul id="content" class="list-group no-radius">
			<!--<a href="#" class="list-group-item">Dapibus ac facilisis in</a>-->
			<!--<a href="#" class="list-group-item">Morbi leo risus</a>-->
			<!--<a href="#" class="list-group-item">Porta ac consectetur ac</a>-->
			<!--<a href="#" class="list-group-item">Vestibulum at eros</a>-->
			<!--<a href="#" class="list-group-item">Dapibus ac facilisis in</a>-->
			<!--<a href="#" class="list-group-item">Morbi leo risus</a>-->
			<!--<a href="#" class="list-group-item">Porta ac consectetur ac</a>-->
			<!--<a href="#" class="list-group-item">Vestibulum at eros</a>-->
			<!--<a href="#" class="list-group-item">Dapibus ac facilisis in</a>-->
			<!--<a href="#" class="list-group-item">Morbi leo risus</a>-->
			<!--<a href="#" class="list-group-item">Porta ac consectetur ac</a>-->
			<!--<a href="#" class="list-group-item">Vestibulum at eros</a>-->
			<!--<a href="#" class="list-group-item">Dapibus ac facilisis in</a>-->
			<!--<a href="#" class="list-group-item">Morbi leo risus</a>-->
			<!--<a href="#" class="list-group-item">Porta ac consectetur ac</a>-->
			<!--<a href="#" class="list-group-item">Vestibulum at eros</a>-->
		</ul>
	</div>
</div>
<!--这个是page1的div -->
</div>
<footer>
	
</footer>


<script src="./static/js/jquery.min.js"></script>
<script src="./static/js/amazeui.min.js"></script>
<script src="./static/js/bootstrap.min.js"></script>
</body>
</html>